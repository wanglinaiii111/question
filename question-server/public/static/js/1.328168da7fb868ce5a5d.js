(window.webpackJsonp=window.webpackJsonp||[]).push([[1,4],{"36Hv":function(module,__webpack_exports__,__webpack_require__){"use strict";var babel_runtime_core_js_promise__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4d7F"),babel_runtime_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(babel_runtime_core_js_promise__WEBPACK_IMPORTED_MODULE_0__),babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("gDS+"),babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_1__),babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("m1cH"),babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__),babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("QbLZ"),babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3__);__webpack_exports__.a={name:"confirm-group",props:["groupTableData","form","curGroupData"],data:function(){var e=this,t=function(){for(var t={},r=[],n=0;n<e.groupTableData.length;n++)t["group"+e.groupTableData[n].id]=[],r.push(babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3___default()({},e.groupTableData[n]));return{obj:t,list:r}};return{checkList:[],group:t().obj,studentList:{},groupData:t().list,id:null}},mounted:function(){this.getStudentList(),this.getNoGroupStu()},methods:{getStudentList:function(){var e=this;this.$request.fetchSearchStu({level:this.form.level,cno:this.form.cno}).then((function(t){for(var r=t.data.result,n={},s=0;s<r.length;s++)n[r[s].sno]=r[s];e.studentList=n;for(var i=[],a=0;a<e.groupData.length;a++){var o=e.groupData[a].snos,_=e.getStuList(o);i.push.apply(i,babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(_));for(var u=0;u<o.length;u++)e.studentList[o[u][0]]=babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3___default()({},e.studentList[o[u][0]],{score:o[u][1]})}for(var l=0;l<i.length;l++)e.studentList[i[l].sno]&&(e.studentList[i[l].sno]=babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3___default()({},e.studentList[i[l].sno],{isGroup:!0}))}))},getNoGroupStu:function getNoGroupStu(){var _this3=this;this.$request.fetchSelnogroup({level:this.form.level,cno:this.form.cno,exam_detail_id:this.form.examSub[1]}).then((function(res){var result=res.data;if(_this3.id=result.id,result.sno_and_ability){var list=void 0;eval("list = "+result.sno_and_ability.replace(/\(/g,"[").replace(/\)/g,"]"));for(var i=0;i<list.length;i++){var stu=_this3.studentList[list[i][0]];stu&&(_this3.studentList[list[i][0]]=babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3___default()({},stu,{score:list[i][1],isGroup:!1}))}_this3.studentList=JSON.parse(babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_1___default()(_this3.studentList))}}))},addNoGroupStu:function(e){return this.$request.fetchAddnogroup({level:this.form.level,cno:this.form.cno,exam_detail_id:this.form.examSub[1],sno_and_ability:"["+e.join()+"]"}).then((function(e){}))},updateNoGroupStu:function(e){return this.$request.fetchUpdnogroup({id:this.id,sno_and_ability:"["+e.join()+"]"}).then((function(e){}))},add:function(e){for(var t=this.checkList,r=0;r<t.length;r++)this.studentList[t[r]]=babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3___default()({},this.studentList[t[r]],{isGroup:!0});var n=[];for(var s in this.group)if(n.push.apply(n,babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(this.group[s])),this.group[s].length>0){var i=s.split("group")[1];this.del(i,"delOther")}t=[].concat(babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(t),n);for(var a=0;a<this.groupData.length;a++)if(this.groupData[a].id===e&&t.length>0){for(var o=[],_=0;_<t.length;_++)o.push([t[_]+"",this.studentList[t[_]].score]);this.groupData[a].snos=[].concat(babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(this.groupData[a].snos),o)}this.checkList=[]},del:function(e,t){for(var r=this.group["group"+e],n=0;n<r.length;n++)this.studentList[r[n]]=babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3___default()({},this.studentList[r[n]],{isGroup:"delOther"===t});for(var s=0;s<this.groupData.length;s++)if(+this.groupData[s].id==+e){var i=this.getStuList(this.groupData[s].snos).filter((function(e){return!r.includes(e.sno)})).map((function(e){return[e.sno,e.score]}));this.groupData[s].snos=i}this.group["group"+e]=[]},getStuList:function(e){var t=this;return e?e.map((function(e){return{sno:e[0],score:e[1],sname:t.studentList[e[0]]?t.studentList[e[0]].sname:"未知"}})):[]},confirmBtn:function(){var e=this,t=[];for(var r in this.studentList)if(Object.hasOwnProperty.call(this.studentList,r)){var n=this.studentList[r];n.isGroup||t.push("("+r+","+n.score+")")}var s=[];console.log(this.id),this.id?s.push(this.updateNoGroupStu(t)):s.push(this.addNoGroupStu(t));for(var i=0;i<this.groupData.length;i++)if(+this.groupData[i].id==+this.curGroupData.id){for(var a=this.groupData[i].snos,o=[],_=0;_<a.length;_++)o.push("("+a[_][0]+","+a[_][1]+")");o.push(this.confirmUpdate(this.groupData[i].id,this.groupData[i].is_sure_question,this.groupData[i].groupid,"["+o.join()+"]"))}babel_runtime_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default.a.all(s).then((function(){e.$emit("getConfirmStatus",!0)})).catch((function(){e.$message.error("确认失败")}))},confirmUpdate:function(e,t,r,n){var s=this;return this.$request.fetchUpdategroup({id:e,is_sure_student:0,is_sure_question:t,groupid:r,snos:n}).then((function(e){e.data.desc&&s.$message.error(e.data.desc)}))},getWeakKnowledge:function(e){for(var t=e.split("||"),r=[],n=0;n<t.length;n++)r.push(t[n].split("_")[0]);return r}}}},"518X":function(e,t,r){},"5FF5":function(e,t,r){"use strict";var n=r("36Hv").a,s=(r("McgL"),r("ZQ22"),r("KHd+")),i=Object(s.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h3",{style:{color:"#409EFF"}},[e._v("未分组学生列表")]),e._v(" "),r("el-checkbox-group",{staticClass:"wfz",model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[e._l(Object.values(e.studentList),(function(t){return[t.isGroup?e._e():r("el-checkbox",{key:t.id,attrs:{label:t.sno}},[t.sname?r("span",[e._v(e._s(t.sname))]):r("span",[e._v("未知")])])]}))],2),e._v(" "),r("el-divider"),e._v(" "),e._l(e.groupData,(function(t){return r("div",{key:t.id,staticClass:"list"},[+t.id==+e.curGroupData.id?r("div",[r("div",{staticClass:"title"},[r("h3",{style:{color:"#409EFF"}},[e._v(e._s(t.level)+"届-"+e._s(t.cno)+"班-"+e._s(t.groupid)+"组")]),e._v(" "),r("div",[r("el-button",{staticClass:"btn",attrs:{size:"mini"},on:{click:function(r){return e.add(t.id)}}},[e._v("添加到当前分组")]),e._v(" "),r("el-button",{staticClass:"btn",attrs:{size:"mini"},on:{click:function(r){return e.del(t.id)}}},[e._v("从当前分组删除")])],1)]),e._v(" "),r("h5",[e._v("薄弱知识点")]),e._v(" "),r("div",{staticClass:"point"},e._l(e.getWeakKnowledge(t.weakpoints_and_rate),(function(t,n){return r("div",{key:t},[e._v(e._s(n+1)+"、"+e._s(t))])})),0),e._v(" "),r("el-checkbox-group",{attrs:{disabled:1==+t.is_sure_student},model:{value:e.group["group"+t.id],callback:function(r){e.$set(e.group,"group"+t.id,r)},expression:"group['group' + item.id]"}},e._l(e.getStuList(t.snos),(function(t){return r("el-checkbox",{key:t.sno,attrs:{label:t.sno}},[e._v(e._s(t.sname))])})),1),e._v(" "),r("el-divider")],1):e._e()])})),e._v(" "),r("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.confirmBtn()}}},[e._v("确认分组")])],2)}),[],!1,null,"7e6ea301",null);t.a=i.exports},Eiiv:function(e,t){"undefined"!=typeof jQuery&&"undefined"!=typeof saveAs?function(e){e.fn.wordExport=function(t){t=void 0!==t?t:"jQuery-Word-Export";var r={mhtml:{top:"Mime-Version: 1.0\nContent-Base: "+location.href+'\nContent-Type: Multipart/related; boundary="NEXT.ITEM-BOUNDARY";type="text/html"\n\n--NEXT.ITEM-BOUNDARY\nContent-Type: text/html; charset="utf-8"\nContent-Location: '+location.href+"\n\n<!DOCTYPE html>\n<html>\n_html_</html>",head:'<head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n<style>\n_styles_\n</style>\n</head>\n',body:"<body>_body_</body>"}},n=624,s=e(this).clone();s.each((function(){var t=e(this);t.is(":hidden")&&t.remove()}));var i=Array(),a=s.find("img");console.log(a);for(var o=0;o<a.length;o++){var _=Math.min(a[o].width,n),u=a[o].height*(_/a[o].width),l=document.createElement("CANVAS");l.width=_,l.height=u,l.getContext("2d").drawImage(a[o],0,0,_,u),e(a[o]).attr("src",a[o].src)}var c="\n";for(o=0;o<i.length;o++)c+="--NEXT.ITEM-BOUNDARY\n",c+="Content-Location: "+i[o].location+"\n",c+="Content-Type: "+i[o].type+"\n",c+="Content-Transfer-Encoding: "+i[o].encoding+"\n\n",c+=i[o].data+"\n\n";c+="--NEXT.ITEM-BOUNDARY--";var d=r.mhtml.top.replace("_html_",r.mhtml.head.replace("_styles_","")+r.mhtml.body.replace("_body_",s.html()))+c,p=new Blob([d],{type:"application/msword;charset=utf-8"});saveAs(p,t+".doc")}}(jQuery):("undefined"==typeof jQuery&&console.error("jQuery Word Export: missing dependency (jQuery)"),"undefined"==typeof saveAs&&console.error("jQuery Word Export: missing dependency (FileSaver.js)"))},Iab2:function(e,t,r){(function(r){var n,s,i;s=[],void 0===(i="function"==typeof(n=function(){"use strict";function t(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){o(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r&&r.global===r?r:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,r,a){var o=i.URL||i.webkitURL,_=document.createElement("a");r=r||e.name||"download",_.download=r,_.rel="noopener","string"==typeof e?(_.href=e,_.origin===location.origin?s(_):n(_.href)?t(e,r,a):s(_,_.target="_blank")):(_.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(_.href)}),4e4),setTimeout((function(){s(_)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,r,i){if(r=r||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),r);else if(n(e))t(e,r,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){s(a)}))}}:function(e,r,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,n);var o="application/octet-stream"===e.type,_=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&_||a)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},l.readAsDataURL(e)}else{var c=i.URL||i.webkitURL,d=c.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout((function(){c.revokeObjectURL(d)}),4e4)}});i.saveAs=o.saveAs=o,e.exports=o})?n.apply(t,s):n)||(e.exports=i)}).call(this,r("yLpj"))},J4Ih:function(e,t,r){},M4e1:function(e,t,r){"use strict";r("518X")},McgL:function(e,t,r){"use strict";r("ZPJG")},TTmx:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={htmlEncodeByRegExp:function(e){return 0==e.length?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\s/g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")},htmlDecodeByRegExp:function(e){return 0==e.length?"":e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&#39;/g,"'").replace(/&quot;/g,'"')}}},ZPJG:function(e,t,r){},ZQ22:function(e,t,r){"use strict";r("J4Ih")},Zndv:function(e,t,r){"use strict";r.r(t);var n=r("v487").a,s=(r("M4e1"),r("KHd+")),i=Object(s.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",["group"===e.groupLevel?r("div",[r("el-form",{ref:"form",staticClass:"myForm",attrs:{model:e.form,"label-width":"100px",size:"medium","label-position":"left"}},[r("el-form-item",{attrs:{label:"年级"}},[r("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择年级",format:"yyyy届"},on:{change:e.changeLevel},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"班号"}},[r("el-select",{model:{value:e.form.cno,callback:function(t){e.$set(e.form,"cno",t)},expression:"form.cno"}},e._l(e.classList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.cno,value:e.cno}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"考试科目"}},[r("el-cascader",{attrs:{options:e.options,"show-all-levels":!0,size:"medium"},on:{change:e.changeExamId},model:{value:e.examSub,callback:function(t){e.examSub=t},expression:"examSub"}})],1),e._v(" "),r("el-form-item",{staticClass:"myFooter"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),r("el-popconfirm",{attrs:{title:"确定删除当前考试下的所有分组吗？"},on:{confirm:e.delGroup}},["ordinary"!==e.$store.getters.info.role?r("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[e._v("删除分组")]):e._e()],1)],1)],1),e._v(" "),r("el-table",{attrs:{data:e.tableData}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.getTableData(t.row.snos),border:""}},[r("el-table-column",{attrs:{prop:"sname",label:"学生姓名"}}),e._v(" "),r("el-table-column",{attrs:{prop:"sno",label:"学号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"score",label:"能力值"}})],1)]}}],null,!1,2476887454)}),e._v(" "),r("el-table-column",{attrs:{prop:"groupid",label:"组号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"rank",label:"所属分级"}}),e._v(" "),r("el-table-column",{attrs:{prop:"weakpoints_and_rate",label:"薄弱知识点信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.showPoint(t.row)}}},[e._v("查看")])],1)]}}],null,!1,3754853410)}),e._v(" "),r("el-table-column",{attrs:{label:"分组"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.confirmCurGroup(t.row)}}},[e._v("修改分组")])],1)]}}],null,!1,1874946013)}),e._v(" "),r("el-table-column",{attrs:{label:"试题"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",["ordinary"!==e.$store.getters.info.role&&0==+t.row.is_sure_question?r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.handleShowQues(t.row)}}},[e._v("确认试题")]):r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleShowQues(t.row)}}},[e._v("查看推荐试题")])],1)]}}],null,!1,60225478)})],1),e._v(" "),r("el-dialog",{attrs:{title:"确认当前分组",visible:e.dialogFormVisible,width:"650px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[e.dialogFormVisible?r("ConfirmGroup",{attrs:{form:Object.assign({},e.form,{examSub:e.examSub}),groupTableData:e.tableData,curGroupData:e.curGroupData},on:{getConfirmStatus:e.getConfirmStatus}}):e._e()],1),e._v(" "),r("el-dialog",{attrs:{title:"薄弱知识点信息",visible:e.dialogPoint,width:"650px"},on:{"update:visible":function(t){e.dialogPoint=t}}},[r("el-table",{attrs:{data:e.gridData}},[r("el-table-column",{attrs:{property:"weakpoint",label:"薄弱知识点"}}),e._v(" "),r("el-table-column",{attrs:{property:"rate",label:"正确率"}})],1)],1)],1):r("RecommendQues",{attrs:{curGroupData:e.curGroupData}})],1)}),[],!1,null,"37c40915",null);t.default=i.exports},fBJd:function(e,t,r){"use strict";r("z4dL")},rqBn:function(e,t,r){"use strict";r.r(t);r("Iab2"),r("Eiiv");var n=r("TTmx"),s=r("jWbq"),i={name:"recommend-ques",props:["curGroupData"],data:function(){return{url:s.b,HtmlUtil:n.a,questionList:[],diffMap:{.94:"容易",.85:"较易",.65:"中等",.64:"中等",.4:"较难",.15:"困难",0:"困难"}}},mounted:function(){console.log(this.curGroupData),this.getList()},methods:{getList:function(){var e=this;this.$request.fetchSelectquestion({id:this.curGroupData.id}).then((function(t){if(0===t.data.length)return e.getQuestion();e.questionList=t.data}))},getQuestion:function(){var e=this;this.$request.fetchGetProblem({rank:this.curGroupData.rank,weakKnowledge:this.getWeakKnowledge(this.curGroupData.weakpoints_and_rate),subjectId:this.curGroupData.subjectId[1]}).then((function(t){if(0===t.data.length)return e.$message.error("该分组没有获取到推荐试题");e.addQuestion(t.data.data)}))},addQuestion:function(e){var t=this;this.$request.fetchAddquestion({id:this.curGroupData.id,qid_list:e}).then((function(e){if(!e.data.result)return t.$message.error("推荐试题添加失败");t.getList()}))},getWeakKnowledge:function(e){for(var t=e.split("||"),r=[],n=0;n<t.length;n++)r.push(t[n].split("_")[0]);return r},deleteQues:function(e){var t=this;this.$request.fetchDelquestion({id:e}).then((function(e){if(e.data.desc)return t.$message.error(e.data.desc);t.getList(),t.$message({showClose:!0,message:"删除成功！",type:"success"})}))},confirmUpdate:function(){var e=this;this.$request.fetchUpdategroup({id:this.curGroupData.id,is_sure_student:this.curGroupData.is_sure_student,is_sure_question:1,groupid:this.curGroupData.groupid,snos:this.curGroupData.snos}).then((function(t){if(t.data.desc)return e.$message.error(t.data.desc);e.$message.success("确定成功"),e.back()})).catch((function(e){console.log(e)}))},isImage:function(e){if(e)return 0==e.indexOf("http")},getNo:function(e){return e?e.split("13q")[1].split(".html")[0]:""},back:function(){this.$store.dispatch("setGroupLevel","group")},download:function(){$("#myHtml").wordExport(this.curGroupData.level+"届-"+this.curGroupData.cno+"班-"+this.curGroupData.groupid+"组推荐试题")}}},a=(r("fBJd"),r("KHd+")),o=Object(a.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-button",{staticClass:"back",attrs:{size:"medium"},on:{click:e.back}},[e._v("返回上一级")]),e._v(" "),r("el-popconfirm",{attrs:{title:"确定确认试题吗？确认后将不再可修改！"},on:{confirm:function(t){return e.confirmUpdate()}}},["ordinary"!==e.$store.getters.info.role&&0==+e.curGroupData.is_sure_question?r("el-button",{staticClass:"addBtn",attrs:{slot:"reference",size:"medium"},slot:"reference"},[e._v("确认试题")]):e._e()],1),e._v(" "),1==+e.curGroupData.is_sure_question?r("el-button",{staticClass:"addBtn",attrs:{size:"medium"},on:{click:e.download}},[e._v("导出word")]):e._e(),e._v(" "),r("div",{attrs:{id:"myHtml"}},e._l(e.questionList,(function(t){return r("el-card",{key:t.id,staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("div",[r("span",[e._v("题号："+e._s(t.qno))]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("span",[e._v(e._s(-1!==t.qtype.indexOf("题型")?t.qtype:"题型："+t.qtype))]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("span",[e._v(e._s(t.source))]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("span",[e._v("\n            "+e._s(-1!==t.difficulty.indexOf("难度")?e.diffMap[t.difficulty]:"难度："+e.diffMap[t.difficulty])+"\n          ")])],1),e._v(" "),0==+e.curGroupData.is_sure_question?r("div",{staticClass:"toolBtn"},[r("el-popconfirm",{attrs:{title:"确定删除这道题吗？"},on:{confirm:function(r){return e.deleteQues(t.id)}}},["ordinary"!==e.$store.getters.info.role?r("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")]):e._e()],1)],1):e._e()]),e._v(" "),r("div",[r("div",{staticClass:"title"},[r("span",{domProps:{innerHTML:e._s(e.HtmlUtil.htmlDecodeByRegExp(t.stem))}})]),e._v(" "),e.isImage(t.answer)?r("img",{attrs:{src:e.url+"exam/download?filename="+e.getNo(t.weburl)+".png&answerpic=1&stempic=",alt:""}}):r("span",{domProps:{innerHTML:e._s(e.HtmlUtil.htmlDecodeByRegExp(t.answer))}}),e._v(" "),r("h4",[e._v("知识点:")]),e._v(" "),r("span",[e._v(e._s(t.points.replace(/[\s]+/g,"    ")))])])])})),1)],1)}),[],!1,null,"064f2d4a",null);t.default=o.exports},v487:function(module,__webpack_exports__,__webpack_require__){"use strict";var babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("14Xm"),babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("D3Ub"),babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__),babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("gDS+"),babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2__),babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("QbLZ"),babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3__),_recommendQues_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("rqBn"),_confirmGroup_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5FF5");__webpack_exports__.a={name:"group-table",components:{RecommendQues:_recommendQues_vue__WEBPACK_IMPORTED_MODULE_4__.default,ConfirmGroup:_confirmGroup_vue__WEBPACK_IMPORTED_MODULE_5__.a},data:function(){return{dialogFormVisible:!1,dialogPoint:!1,form:{level:(new Date).getFullYear()+"",cno:""},formDialog:{},updateDate:{},examSub:[],options:[],tableData:[],classList:[],studentMap:{},curGroupData:null,gridData:[]}},beforeRouteLeave:function(e,t,r){this.$store.dispatch("setGroupLevel","group"),r()},mounted:function(){this.getClassList(),this.getExamList()},computed:{groupLevel:function(){return this.$store.getters.groupLevel}},watch:{groupLevel:function(e,t){"group"===e&&this.search()}},methods:{getList:function getList(){var _this=this;if(0===this.examSub.length)return this.$message.error("请选择考试科目");this.$request.fetchSearchgroup({level:this.form.level,cno:this.form.cno,exam_detail_id:this.examSub[1]}).then((function(res){var result=res.data.result;result=result.map((function(item){var snos=void 0;return eval("snos = "+item.snos.replace(/\(/g,"[").replace(/\)/g,"]")),babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3___default()({},item,{snos:snos})})),_this.tableData=JSON.parse(babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2___default()(result))}))},getClassList:function(){var e=this;this.$request.fetchSearchClass({level:this.form.level,headteacher:""}).then((function(t){var r=t.data.result;e.classList=r,r.length>0&&(e.form.cno=r[0].cno)}))},getExamList:function(){var e=this;this.$request.fetchSelectExam({}).then((function(t){var r;e.options=[],t.data.result.map((r=babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function t(r,n){var s;return babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getExam_subjectList(r.exam_id);case 2:return s=t.sent,e.options.push({value:r.exam_id,label:r.name,children:[]}),s.map((function(t){e.options[n].children.push({value:t.exam_detail_id,label:t.subject_name})})),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,e)}))),function(e,t){return r.apply(this,arguments)}))}))},getExam_subjectList:function(e){return this.$request.fetchSelectExamsubject({exam_id:e}).then((function(e){return e.data}))},getStudentList:function(){var e=this;this.$request.fetchSearchStu({level:this.form.level,cno:""}).then((function(t){for(var r=t.data.result,n={},s=0;s<r.length;s++)n[r[s].sno]=r[s];e.studentMap=n}))},changeLevel:function(e){this.form.level=e,this.getClassList()},changeExamId:function(e){this.examSub=e},search:function(){var e=this;return babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function t(){return babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getList();case 2:return t.next=4,e.getStudentList();case 4:case"end":return t.stop()}}),t,e)})))()},getTableData:function(e){var t=this;return e?e.map((function(e){return{sno:e[0],score:e[1],sname:t.studentMap[e[0]]?t.studentMap[e[0]].sname:""}})):[]},confirmUpdate:function(){var e=this;this.$request.fetchUpdategroup({id:this.formDialog.id,is_sure_student:this.formDialog.is_sure_student,is_sure_question:this.formDialog.is_sure_question,groupid:this.formDialog.groupid,snos:this.formDialog.snos}).then((function(t){e.dialogFormVisible=!1,t.data.desc&&e.$message.error(t.data.desc),e.search()}))},confirmCurGroup:function(e){"ordinary"!==this.$store.getters.info.role?(this.dialogFormVisible=!0,this.curGroupData=e):this.$message.error("您没有修改分组的权限！")},delGroup:function(){var e=this;if(0===this.examSub.length)return this.$message.error("请选择要删除分组的考试科目");this.$request.fetchDelgroup({exam_detail_id:this.examSub[1],cno:this.form.cno,level:this.form.level}).then((function(t){e.search(),e.$message({showClose:!0,message:"删除成功！",type:"success"})}))},handleShowQues:function(e){this.curGroupData=babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_3___default()({},e,{subjectId:this.examSub}),this.$store.dispatch("setGroupLevel","ques")},getConfirmStatus:function(e){this.getList(),this.dialogFormVisible=!1},showPoint:function(e){this.dialogPoint=!0,this.gridData=this.getWeakKnowledge(e.weakpoints_and_rate)},getWeakKnowledge:function(e){for(var t=e.split("||"),r=[],n=0;n<t.length;n++)r.push({weakpoint:t[n].split("_")[0],rate:100*t[n].split("_")[1]+"%"});return r}}}},z4dL:function(e,t,r){}}]);
//# sourceMappingURL=1.328168da7fb868ce5a5d.js.map